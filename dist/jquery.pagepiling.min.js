/*!
 * pagepiling.js 1.5.5
 *
 * https://github.com/alvarotrigo/pagePiling.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n,e,t,o){"use strict";n.fn.pagepiling=function(i){function a(){"undefined"==typeof $.navigation.textColor&&($.navigation.textColor=""),"undefined"==typeof $.navigation.bulletsColor&&($.navigation.bulletsColor=""),"undefined"==typeof $.navigation.position&&($.navigation.position=""),"undefined"==typeof $.navigation.tooltips&&($.navigation.tooltips=""),$.navigation={textColor:$.navigation.textColor,bulletsColor:$.navigation.bulletsColor,position:$.navigation.position,tooltips:$.navigation.tooltips}}function s(n){n.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function c(e){var t=n(".pp-section.active").index(".pp-section"),o=e.index(".pp-section");return t>o?"up":"down"}function r(e,t){var o={destination:e,animated:t,activeSection:n(".pp-section.active"),anchorLink:e.data("anchor"),sectionIndex:e.index(".pp-section"),toMove:e,yMovement:c(e),leavingSection:n(".pp-section.active").index(".pp-section")+1};if(!o.activeSection.is(e)){"undefined"==typeof o.animated&&(o.animated=!0),"undefined"!=typeof o.anchorLink&&f(o.anchorLink,o.sectionIndex),o.destination.addClass("active").siblings().removeClass("active"),o.sectionsToMove=d(o),"down"===o.yMovement?(o.translate3d=W(),o.scrolling="-100%",$.css3||o.sectionsToMove.each(function(e){e!=o.activeSection.index(".pp-section")&&n(this).css(v(o.scrolling))}),o.animateSection=o.activeSection):(o.translate3d="translate3d(0px, 0px, 0px)",o.scrolling="0",o.animateSection=e),n.isFunction($.onLeave)&&$.onLeave.call(this,o.leavingSection,o.sectionIndex+1,o.yMovement),l(o),O(o.anchorLink),A(o.anchorLink,o.sectionIndex),B=o.anchorLink;var i=(new Date).getTime();R=i}}function l(e){$.css3?(y(e.animateSection,e.translate3d,e.animated),e.sectionsToMove.each(function(){y(n(this),e.translate3d,e.animated)}),setTimeout(function(){p(e)},$.scrollingSpeed)):(e.scrollOptions=v(e.scrolling),e.animated?e.animateSection.animate(e.scrollOptions,$.scrollingSpeed,$.easing,function(){u(e),p(e)}):(e.animateSection.css(v(e.scrolling)),setTimeout(function(){u(e),p(e)},400)))}function p(e){n.isFunction($.afterLoad)&&$.afterLoad.call(this,e.anchorLink,e.sectionIndex+1)}function d(e){var t;return t="down"===e.yMovement?n(".pp-section").map(function(t){if(t<e.destination.index(".pp-section"))return n(this)}):n(".pp-section").map(function(t){if(t>e.destination.index(".pp-section"))return n(this)})}function u(e){"up"===e.yMovement&&e.sectionsToMove.each(function(t){n(this).css(v(e.scrolling))})}function v(n){return"vertical"===$.direction?{top:n}:{left:n}}function f(n,e){$.anchors.length?(location.hash=n,h(location.hash)):h(String(e))}function h(e){e=e.replace("#",""),n("body")[0].className=n("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),n("body").addClass("pp-viewing-"+e)}function m(){var o=t.location.hash.replace("#",""),i=o,a=n(e).find('.pp-section[data-anchor="'+i+'"]');a.length>0&&r(a,$.animateAnchor)}function g(){var n=(new Date).getTime();return n-R<Z+$.scrollingSpeed}function S(){var o=t.location.hash.replace("#","").split("/"),i=o[0];if(i.length&&i&&i!==B){var a;a=isNaN(i)?n(e).find('[data-anchor="'+i+'"]'):n(".pp-section").eq(i-1),r(a)}}function w(n){return{"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,transform:n}}function y(n,e,t){n.toggleClass("pp-easing",t),n.css(w(e))}function b(e){var o=(new Date).getTime();e=e||t.event;var i=e.wheelDelta||-e.deltaY||-e.detail,a=Math.max(-1,Math.min(1,i)),s="undefined"!=typeof e.wheelDeltaX||"undefined"!=typeof e.deltaX,c=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!s;J.length>149&&J.shift(),J.push(Math.abs(i));var r=o-nn;if(nn=o,r>200&&(J=[]),!g()){var l=n(".pp-section.active"),p=T(l),d=x(J,10),u=x(J,70),v=d>=u;return v&&c&&(a<0?M("down",p):a>0&&M("up",p)),!1}}function x(n,e){for(var t=0,o=n.slice(Math.max(n.length-e,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/e)}function M(n,e){var t,o;if("down"==n?(t="bottom",o=F.moveSectionDown):(t="top",o=F.moveSectionUp),e.length>0){if(!C(t,e))return!0;o()}else o()}function C(n,e){return"top"===n?!e.scrollTop():"bottom"===n?e.scrollTop()+1+e.innerHeight()>=e[0].scrollHeight:void 0}function T(n){return n.filter(".pp-scrollable")}function k(){Q.get(0).addEventListener?(Q.get(0).removeEventListener("mousewheel",b,!1),Q.get(0).removeEventListener("wheel",b,!1)):Q.get(0).detachEvent("onmousewheel",b)}function E(){Q.get(0).addEventListener?(Q.get(0).addEventListener("mousewheel",b,!1),Q.get(0).addEventListener("wheel",b,!1)):Q.get(0).attachEvent("onmousewheel",b)}function L(){if(j){var n=I();Q.off("touchstart "+n.down).on("touchstart "+n.down,Y),Q.off("touchmove "+n.move).on("touchmove "+n.move,N)}}function D(){if(j){var n=I();Q.off("touchstart "+n.down),Q.off("touchmove "+n.move)}}function I(){var n;return n=t.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function X(n){var e=new Array;return e.y="undefined"!=typeof n.pageY&&(n.pageY||n.pageX)?n.pageY:n.touches[0].pageY,e.x="undefined"!=typeof n.pageX&&(n.pageY||n.pageX)?n.pageX:n.touches[0].pageX,e}function P(n){return"undefined"==typeof n.pointerType||"mouse"!=n.pointerType}function Y(n){var e=n.originalEvent;if(P(e)){var t=X(e);H=t.y,K=t.x}}function N(e){var t=e.originalEvent;if(!q(e.target)&&P(t)){var o=n(".pp-section.active"),i=T(o);if(i.length||e.preventDefault(),!g()){var a=X(t);V=a.y,G=a.x,"horizontal"===$.direction&&Math.abs(K-G)>Math.abs(H-V)?Math.abs(K-G)>Q.width()/100*$.touchSensitivity&&(K>G?M("down",i):G>K&&M("up",i)):Math.abs(H-V)>Q.height()/100*$.touchSensitivity&&(H>V?M("down",i):V>H&&M("up",i))}}}function q(e,t){t=t||0;var o=n(e).parent();return!!(t<$.normalScrollElementTouchThreshold&&o.is($.normalScrollElements))||t!=$.normalScrollElementTouchThreshold&&q(o,++t)}function z(){n("body").append('<div id="pp-nav"><ul></ul></div>');var e=n("#pp-nav");e.css("color",$.navigation.textColor),e.addClass($.navigation.position);for(var t=0;t<n(".pp-section").length;t++){var o="";if($.anchors.length&&(o=$.anchors[t]),"undefined"!==$.navigation.tooltips){var i=$.navigation.tooltips[t];"undefined"==typeof i&&(i="")}e.find("ul").append('<li data-tooltip="'+i+'"><a href="#'+o+'"><span></span></a></li>')}e.find("span").css("border-color",$.navigation.bulletsColor)}function A(e,t){$.navigation&&(n("#pp-nav").find(".active").removeClass("active"),e?n("#pp-nav").find('a[href="#'+e+'"]').addClass("active"):n("#pp-nav").find("li").eq(t).find("a").addClass("active"))}function O(e){$.menu&&(n($.menu).find(".active").removeClass("active"),n($.menu).find('[data-menuanchor="'+e+'"]').addClass("active"))}function U(){var n,i=e.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(i,null);for(var s in a)i.style[s]!==o&&(i.style[s]="translate3d(1px,1px,1px)",n=t.getComputedStyle(i).getPropertyValue(a[s]));return e.body.removeChild(i),n!==o&&n.length>0&&"none"!==n}function W(){return"vertical"!==$.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var B,F=n.fn.pagepiling,Q=n(this),R=0,j="ontouchstart"in t||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,H=0,K=0,V=0,G=0,J=[],Z=600,$=n.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},i);$.navigation&&a(),n.extend(n.easing,{easeInQuart:function(n,e,t,o,i){return o*(e/=i)*e*e*e+t}}),F.setScrollingSpeed=function(n){$.scrollingSpeed=n},F.setMouseWheelScrolling=function(n){n?E():k()},F.setAllowScrolling=function(n){n?(F.setMouseWheelScrolling(!0),L()):(F.setMouseWheelScrolling(!1),D())},F.setKeyboardScrolling=function(n){$.keyboardScrolling=n},F.moveSectionUp=function(){var e=n(".pp-section.active").prev(".pp-section");!e.length&&$.loopTop&&(e=n(".pp-section").last()),e.length&&r(e)},F.moveSectionDown=function(){var e=n(".pp-section.active").next(".pp-section");!e.length&&$.loopBottom&&(e=n(".pp-section").first()),e.length&&r(e)},F.moveTo=function(t){var o="";o=isNaN(t)?n(e).find('[data-anchor="'+t+'"]'):n(".pp-section").eq(t-1),o.length>0&&r(o)},n($.sectionSelector).each(function(){n(this).addClass("pp-section")}),$.css3&&($.css3=U()),n(Q).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),F.setAllowScrolling(!0),n.isEmptyObject($.navigation)||z();var _=n(".pp-section").length;n(".pp-section").each(function(e){n(this).data("data-index",e),n(this).css("z-index",_),e||0!==n(".pp-section.active").length||n(this).addClass("active"),"undefined"!=typeof $.anchors[e]&&n(this).attr("data-anchor",$.anchors[e]),"undefined"!=typeof $.sectionsColor[e]&&n(this).css("background-color",$.sectionsColor[e]),$.verticalCentered&&!n(this).hasClass("pp-scrollable")&&s(n(this)),_-=1}).promise().done(function(){$.navigation&&(n("#pp-nav").css("margin-top","-"+n("#pp-nav").height()/2+"px"),n("#pp-nav").find("li").eq(n(".pp-section.active").index(".pp-section")).find("a").addClass("active")),n(t).on("load",function(){m()}),n.isFunction($.afterRender)&&$.afterRender.call(this)}),n(t).on("hashchange",S),n(e).keydown(function(e){if($.keyboardScrolling&&!g())switch(e.which){case 38:case 33:F.moveSectionUp();break;case 40:case 34:F.moveSectionDown();break;case 36:F.moveTo(1);break;case 35:F.moveTo(n(".pp-section").length);break;case 37:F.moveSectionUp();break;case 39:F.moveSectionDown();break;default:return}}),$.normalScrollElements&&(n(e).on("mouseenter",$.normalScrollElements,function(){F.setMouseWheelScrolling(!1)}),n(e).on("mouseleave",$.normalScrollElements,function(){F.setMouseWheelScrolling(!0)}));var nn=(new Date).getTime();n(e).on("click touchstart","#pp-nav a",function(e){e.preventDefault();var t=n(this).parent().index();r(n(".pp-section").eq(t))}),n(e).on({mouseenter:function(){var e=n(this).data("tooltip");n('<div class="pp-tooltip '+$.navigation.position+'">'+e+"</div>").hide().appendTo(n(this)).fadeIn(200)},mouseleave:function(){n(this).find(".pp-tooltip").fadeOut(200,function(){n(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);
//# sourceMappingURL=jquery.pagepiling.min.js.map
